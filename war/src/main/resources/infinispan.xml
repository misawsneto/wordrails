<?xml version="1.0" encoding="UTF-8"?>
<infinispan
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:infinispan:config:6.0 http://www.infinispan.org/schemas/infinispan-config-6.0.xsd"
    xmlns="urn:infinispan:config:6.0">


    <global>

        <globalJmxStatistics
            enabled="false"
            cacheManagerName="HibernateSearch"
            allowDuplicateDomains="true" />

        <transport clusterName="HibernateSearch-Infinispan-cluster">
            <properties>
                <property name="configurationFile" value="jgroups.xml" />
            </properties>
        </transport>

        <shutdown hookBehavior="DONT_REGISTER" />

    </global>

    <default>

        <locking
            lockAcquisitionTimeout="20000"
            writeSkewCheck="false"
            concurrencyLevel="500"
            useLockStriping="false" />

        <invocationBatching enabled="false" />
        
        <clustering mode="replication">
            <stateTransfer timeout="480000" fetchInMemoryState="true" />
            <sync replTimeout="20000" />
        </clustering>

        <jmxStatistics enabled="true" />

        <eviction maxEntries="-1" strategy="NONE" />

        <expiration maxIdle="-1" />

    </default>


    <namedCache name="LuceneIndexesMetadata">
        <persistence passivation="false">
            <store class="org.infinispan.persistence.file.SingleFileStore" fetchPersistentState="false" preload="true"
                   shared="false" purgeOnStartup="true" ignoreModifications="false">
                <async enabled="true" flushLockTimeout="1" shutdownTimeout="25000" modificationQueueSize="1024" threadPoolSize="1"/>
                <properties>
                    <property name="location" value="indexes"/>
                </properties>
            </store>
        </persistence>
        <clustering mode="replication">
            <stateTransfer fetchInMemoryState="true" />
            <sync replTimeout="25000" />
        </clustering>
    </namedCache>


    <namedCache name="LuceneIndexesData">
        <persistence passivation="false">
            <store class="org.infinispan.persistence.file.SingleFileStore" fetchPersistentState="false" preload="true"
               shared="false" purgeOnStartup="true" ignoreModifications="false">
                <async enabled="true" flushLockTimeout="1" shutdownTimeout="25000" modificationQueueSize="1024" threadPoolSize="1"/>
                <properties>
                    <property name="location" value="indexes"/>
                </properties>
            </store>
        </persistence>
        <clustering mode="replication">
            <stateTransfer fetchInMemoryState="true" />
            <sync replTimeout="25000" />
        </clustering>
    </namedCache>


    <namedCache name="LuceneIndexesLocking">
        <clustering mode="replication">
            <stateTransfer fetchInMemoryState="true" />
            <sync replTimeout="25000" />
        </clustering>
    </namedCache>

</infinispan>