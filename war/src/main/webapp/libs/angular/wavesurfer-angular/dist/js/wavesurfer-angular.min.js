!function(){"use strict";angular.module("wavesurfer.angular",[]).filter("hms",function(){return function(e){var l=parseInt(e,10),a=Math.floor(l/3600),n=Math.floor((l-3600*a)/60),r=l-3600*a-60*n;10>a&&(a="0"+a),10>n&&(n="0"+n),10>r&&(r="0"+r);var t=n+":"+r;return t}}).directive("wavesurferAngular",function(e,l){return{restrict:"AE",scope:{url:"=",options:"="},template:'<div class="row"><div class="col-xs-12 wave-control-wrap"><button class="bw-btn" ng-click="bw()"></button><button ng-class="{\'play-btn\': !playing, \'pause-btn\': playing}" ng-click="playpause()"></button><button class="ff-btn" ng-click="ff()"></button><span class="sound-duration pull-left"><span>{{moment | hms}}</span> / <span>{{length | hms}}</span></span><div class="waveform" id="waveform"></div><span ng-class="{\'volume-100\' : volume_level > 50, \'volume-50\' : volume_level > 0 && volume_level <= 50, \'volume-0\' : volume_level === 0}" id="player"><span class="audio-volume" id="volume" style="width: 75%"></span></span></div></div>',link:function(a){a.wavesurfer=Object.create(WaveSurfer),a.playing=!1,a.volume_level=l.sessionStorage.audioLevel||50,a.updateSlider=function(){$("#volume").slider({min:0,max:100,value:a.volume_level,range:"min",animate:!0,slide:function(e,n){a.volume_level=l.sessionStorage.audioLevel=n.value,a.wavesurfer.setVolume(a.volume_level/100)}})},a.options=_.extend({container:document.querySelector("#waveform")},a.options),a.wavesurfer.init(a.options),a.updateSlider(),a.wavesurfer.load(a.url),a.moment="0",a.wavesurfer.on("ready",function(){a.length=Math.floor(a.wavesurfer.getDuration()).toString(),e(function(){a.moment=Math.floor(a.wavesurfer.getCurrentTime()).toString()},1e3*parseFloat(a.playrate))}),a.wavesurfer.on("finish",function(){a.playing=!1}),a.playpause=function(){a.wavesurfer.playPause(),a.playing=!a.playing},a.ff=function(){a.wavesurfer.skipForward()},a.bw=function(){a.wavesurfer.skipBackward()}}}})}();