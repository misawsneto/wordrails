<div id="settings-perspectives">
	<div class="p-sm pos-abt top-0 left-0 w-full md-whiteframe-z0 md-primary-hue-1 background">

    <md-button aria-label="nothing" class="pull-right" style="margin: 5px 10px 0 10px;" ng-click="togglePerspectives()">
			<md-tooltip md-direction="top">
	    		{{'settings.post.OPTIONS' | translate}}
	  		</md-tooltip>
			<i class="mdi mdi2-menu i-20 m-r-sm"></i> {{'titles.PERSPECTIVES' | translate}}
		</md-button>

		<!--<md-button aria-label="nothing" class="pull-left" style="margin: 5px 10px 0 10px;" ng-click="togglePerspectives()">
			<md-tooltip md-direction="top">
    		{{'titles.SAVE' | translate}}
  		</md-tooltip>
			<i class="mdi mdi2-content-save i-20 m-r-sm"></i> {{'titles.SAVE' | translate}}
		</md-button>-->

		<md-button aria-label="nothing" ng-click="isMobile = !isMobile; reloadMasonry();" aria-label="Open demo menu" class="md-icon-button pull-right" style="margin-top: 5px;" ng-click="$mdOpenMenu($event)">
      <i class="i-20" ng-class="{'mdi-hardware-desktop-windows': !isMobile, 'mdi-hardware-phone-android': isMobile }"></i>
    </md-button>

	</div>

	<div id="setting-perspective-editor">
		<div class="p-md">
			<div class="color-selector-container">
				<div class="content m-t-md pos-rlt">
					<div class="browser-buttons" ng-class="{'mobile opacity-0': isMobile}"></div>
					<div class="mockup-browser animated fadeIn o-f-h" style="padding-bottom: 50px;" ng-class="{'mobile': isMobile, 'desktop': !isMobile}">

				    <md-toolbar class="no-radius md-primary md-whiteframe-z1" style="min-height: 50px; height: 50px">
				      <a md-ink-ripple ng-click="toggleDemo()" class="pull-left i-16" style="    padding: 0 16px;
				        line-height: 50px;
				        max-width: 55px;">
				      <i class="mdi-navigation-menu i-24"></i></a>
				      <div class="pos-abt top-0 p m-l-xxl" style="padding: 11px">{{thisStation.name}}</div>
				    </md-toolbar>

				    <div class="vbox">
			        <div class="row-row">
			          <div class="cell">
			            <div class="cell-inner">

				            <md-tabs  md-border-bottom class="pos-abt bottom-0 right-0 left-0 top-0 md-primary md-hue-1" >
				            	<md-tab label="1">
				            		<md-tab-label>
				            			<i class="mdi2-home i-20"></i>
				            		</md-tab-label>
				            		<md-tab-body>
				            			<md-content class="o-f-x-h">

														<div class="clear pos-rlt p" ng-if="currentPerspective.termPerspectiveView.featuredRow.cells && !isMobile"
														ng-mouseenter="currentPerspective.termPerspectiveView.featuredRow.showOptions=true" ng-mouseleave="currentPerspective.termPerspectiveView.featuredRow.showOptions=false">
															<ul class="pgwSlider" pgw-slider="{verticalCentering:true, maxHeight: 400, selectionMode: 'click', intervalDuration: 7000 }">
														    <li ng-repeat="cell in currentPerspective.termPerspectiveView.featuredRow.cells">
														    	<img ng-src="{{app.getImageLink(cell.postView, 'large')}}" preload-bg-image="{{app.getImageLink(cell.postView, 'large')}}" class="bg-cover opacity-0" alt="{{cell.postView.title}}" data-description="{{cell.postView.snippet | characters:200}}">
														    	<div ng-if="app.hasImage(cell.postView)" preload-bg-image="{{app.getImageLink(cell.postView, 'large')}}" class="md-whiteframe-z1 pos-abt top-0 bottom-0 right-0 left-0 bg-cover">
				                        	</div>
				                        	<span>{{cell.postView.title}}</span>
													    	</li>
															</ul>

															<div ng-if="currentPerspective.termPerspectiveView.featuredRow.showOptions" class="p" style="position: absolute; top:0; bottom:0; right:0; left:0;">
																<div class="display-table text-center" style="background: rgba(0,0,0,0.5); height:100%; width: 100%;">
																	<div class="display-cell v-m">
																		<md-button aria-label="nothing" aria-label="menu" class="md-fab md-accent">
																		  <md-tooltip md-direction="top">
																		    {{'titles.EDIT' | translate}}
																		  </md-tooltip>
																		  <i class="mdi2-settings i-24"></i>
																		</md-button>
																	</div>
																</div>
															</div>
														</div>

														<div ng-if="currentPerspective.termPerspectiveView.featuredRow.cells && isMobile"
														ng-mouseenter="currentPerspective.termPerspectiveView.featuredRow.showOptions=true" ng-mouseleave="currentPerspective.termPerspectiveView.featuredRow.showOptions=false" class="pos-rlt">
															<ul rn-carousel="" rn-carousel-index="carouselIndex" rn-carousel-auto-slide="" rn-carousel-pause-on-hover="" rn-carousel-buffered="" class="ng-scope h-200 image no-margin">
																<li ng-repeat="cell in currentPerspective.termPerspectiveView.featuredRow.cells">
																	<div ng-if="app.hasImage(cell.postView)" preload-bg-image="{{app.getImageLink(cell.postView, 'large')}}" class="md-whiteframe-z1 h-200 pos-abt top-0 bottom-0 right-0 left-0 bg-cover layer">
																		<div class="pos-abt bottom-0 right-0 left-0 pgwSlider">
																			<div class="ps-caption" style="display: block">{{cell.postView.title}}</div>
																		</div>
				                        	</div>
																</li>
															</ul>
															<div class="text-center opacity-08 pos-rlt m-t-n-lg text-md z-i-2 perspective-editor-options-button " style="margin-top: -34px">
																<div class="text-shadow-sm text-lg" rn-carousel-indicators="" ng-if="currentPerspective.termPerspectiveView.featuredRow.cells.length > 1" slides="currentPerspective.termPerspectiveView.featuredRow.cells" rn-carousel-index="carouselIndex">
																</div>
															</div>
															<div ng-if="currentPerspective.termPerspectiveView.featuredRow.showOptions" class="" style="position: absolute; top:0; bottom:0; right:0; left:0;">
																<div class="display-table text-center" style="background: rgba(0,0,0,0.5); height:100%; width: 100%;">
																	<div class="display-cell v-m">
																		<md-button aria-label="nothing" aria-label="menu" class="md-fab md-accent">
																		  <md-tooltip md-direction="top">
																		    {{'titles.EDIT' | translate}}
																		  </md-tooltip>
																		  <i class="mdi2-settings i-24"></i>
																		</md-button>
																	</div>
																</div>
															</div>
														</div>

				            				<div class="" ng-class="{'p-h-xxl': !isMobile}">
					                    <div class="row no-margin" reload-on-show masonry>
							                  <div class="p masonry-brick" ng-class="{'col-xs-6': !isMobile, 'col-xs-12 p-r-sm p-0 p-b': isMobile}" ng-repeat="cell in currentPerspective.termPerspectiveView.homeRow.cells"
																ng-mouseenter="cell.showOptions=true" ng-mouseleave="cell.showOptions=false">

																	<md-button class="opacity-09 text-white pos-abt top-0 left-0 md-icon-button m-r-t z-index-5" ng-style="{'margin': !isMobile ? '16px' : '0' }">
																		<i class="i-24 mdi2-pin icon-text-shadow"></i>
																	</md-button>

							                    <div class="w-full no-margin" ng-class="{'md-whiteframe-z1 card': !isMobile}">
							                      <div class="item" ng-if="!isMobile">
							                      	<div ng-if="app.hasImage(cell.postView)" preload-bg-image="{{app.getImageLink(cell.postView, 'large')}}" class="h-200 img-responsive md-whiteframe-z1 thumb-lg w-full h-full bg-cover">
						                        	</div>
							                      </div>
							                      <md-content class="text-base" ng-class="{'p md-hue-1': !isMobile, 'display-table p': isMobile}">
							                      	<div class="inline" ng-class="{'w-lg': isMobile}">
								                        <p class="font-500" ng-class="{'text-md': !isMobile, 'text-base': isMobile}">{{cell.postView.title}}</p>
								                        <p ng-class="{'text-base': !isMobile, 'text-xs': isMobile}">
								                          {{cell.postView.snippet | characters: !isMobile ? 220 : 100}}
								                        </p>
							                      	</div>
							                      	<div class="inline display-cell v-m text-right w-full" ng-if="isMobile">
							                      		<div ng-if="app.hasImage(cell.postView)" preload-bg-image="{{app.getImageLink(cell.postView, 'large')}}" class="img-responsive w-96 m-auto bg-cover">
							                        	</div>
							                      	</div>
							                      </md-content>
							                    </div>
								                  <div class="" ng-if="isMobile && !$last" style="margin: 0 -15px -15px -15px;">
								                  	<md-divider></md-divider>
								                  </div>

								                  <div ng-if="cell.showOptions" ng-class="{'p': !isMobile}" style="position: absolute; top:0; bottom:0; right:0; left:0;">
																		<div class="display-table text-center" style="background: rgba(0,0,0,0.5); height:100%; width: 100%;">
																			<div class="display-cell v-m">
																				<md-button aria-label="nothing" aria-label="menu" class="md-fab md-accent">
																				  <md-tooltip md-direction="top">
																				    {{'titles.EDIT' | translate}}
																				  </md-tooltip>
																				  <i class="mdi2-pin i-24"></i>
																				</md-button>
																			</div>
																		</div>
																	</div>

							                  </div>
						                  </div>
						                  <div class="text-center p">
					            					<md-button aria-label="nothing" aria-label="menu" class="md-accent">
																  {{'titles.LOAD_MORE' | translate}}
																</md-button>
					            				</div>
				            				</div>
				                  </md-content>
				               	</md-tab-body>
				            	</md-tab>

				              <md-tab label="{{row.termName}}" ng-repeat="row in currentPerspective.termPerspectiveView.ordinaryRows">
				              	<md-content class="o-f-x-h">
				              		<div class="" ng-if="!isMobile">
				              			<div class="display-table bg-cover animated5x fadeIn w-full bg-cover m-b md-whiteframe-z2 h-200 text-center" ng-style="{{row.category | categoryImage:'large':true}}" >
														    <div class="text-white display-cell v-m">
														      <span style="border-radius: 30px; border: 2px solid;" class="md-whiteframe-z2 p p-v-sm text-3x text-lg text-shadow-lg font-500">{{::row.category.name}}</span>
														      <div class="text-shadow-lg m-t-md font-normal h4">{{::row.category.description}}</div>
														    </div>
														</div>
				              		</div>
				              		<div class="" ng-class="{'p-h-xxl': !isMobile}">
				              			<div class="row no-margin" reload-on-show masonry>
						                  <div class="p masonry-brick" ng-class="{'col-xs-6': !isMobile, 'col-xs-12': isMobile, 'p-r-sm': isMobile && !$first, 'p-0 p-b': ($first && isMobile)}" ng-repeat="cell in row.cells"
						                  ng-mouseenter="cell.showOptions=true" ng-mouseleave="cell.showOptions=false">
						                    <div class="w-full no-margin" ng-class="{'md-whiteframe-z1 card': !isMobile}">
						                      <div class="item" ng-if="!isMobile || $first">
						                      	<div ng-if="app.hasImage(cell.postView)" preload-bg-image="{{app.getImageLink(cell.postView, 'large')}}" class="h-200 img-responsive md-whiteframe-z1 thumb-lg w-full h-full bg-cover">
					                        	</div>
						                      </div>
						                      <md-content class="text-base" ng-class="{'p md-hue-1': !isMobile, 'display-table': isMobile, 'p': ($first && isMobile)}">
						                      	<div class="inline" ng-class="{'w-lg': isMobile && !$first}">
							                        <p class="font-500" ng-class="{'text-md': !isMobile, 'text-base': isMobile}">{{cell.postView.title}}</p>
							                        <p ng-class="{'text-base': !isMobile, 'text-xs': isMobile}">
							                          {{cell.postView.snippet | characters: !isMobile || $first ? 220 : 100}}
							                        </p>
						                      	</div>
						                      	<div class="inline display-cell v-m text-right w-full" ng-if="isMobile && !$first">
						                      		<div ng-if="app.hasImage(cell.postView)" preload-bg-image="{{app.getImageLink(cell.postView, 'large')}}" class="img-responsive w-96 m-auto bg-cover">
						                        	</div>
						                      	</div>
						                      </md-content>
						                    </div>
							                  <div class="" ng-if="isMobile && !$last" style="margin: 0 -15px -15px -15px;">
							                  	<md-divider></md-divider>
							                  </div>
							                  <div ng-if="cell.showOptions" ng-class="{'p': !isMobile}" style="position: absolute; top:0; bottom:0; right:0; left:0;">
																	<div class="display-table text-center" style="background: rgba(0,0,0,0.5); height:100%; width: 100%;">
																		<div class="display-cell v-m">
																			<md-button aria-label="nothing" aria-label="menu" class="md-fab md-accent">
																			  <md-tooltip md-direction="top">
																			    {{'titles.EDIT' | translate}}
																			  </md-tooltip>
																			  <i class="mdi2-pin i-24"></i>
																			</md-button>
																		</div>
																	</div>
																</div>
						                  </div>
					                  </div>
					                  <div class="text-center p">
				            					<md-button aria-label="nothing" aria-label="menu" class="md-accent">
															  {{'titles.LOAD_MORE' | translate}}
															</md-button>
				            				</div>
				              		</div>
												</md-content>
				              </md-tab>
				            </md-tabs>
									    <!-- /mockup-grid -->
							    </div>
						    </div>
					    </div>
				    </div>
						<!-- /vbox -->	
					</div>
				</div>
			</div>
		</div><!-- /container -->
	</div>

	<md-button aria-label="nothing" aria-label="menu" class="md-fab md-accent pos-fix right-0 bottom-0 m-r-xxl m-b-lg animated">
	  <md-tooltip md-direction="top">
	    {{'titles.SAVE' | translate}}
	  </md-tooltip>
	  <i class="mdi2-content-save i-24"></i>
	</md-button>
</div>

<md-sidenav class="md-sidenav-right md-whiteframe-z2 w-400" md-component-id="perspective-list">
	  <md-toolbar class="md-theme-light">
	    <h1 class="md-toolbar-tools" translate="titles.PERSPECTIVES"></h1>
	  </md-toolbar>
  	<md-button aria-label="nothing" aria-label="menu" class="md-fab md-accent pos-abt right-0 top-0" style="margin-top: 34px;margin-right: 30px;">
		  <md-tooltip md-direction="top">
		    {{'titles.ADD' | translate}}
		  </md-tooltip>
		  <i class="mdi2-plus i-24"></i>
		</md-button>
	  <md-content class="pos-abt bottom-0 right-0 left-0 md-background-default background" style="top:64px">
	  	<div id="" class="vbox">
        <div class="row-row">
          <div class="cell">
            <div class="cell-inner p-t-lg">
            	
              <div class="m-t-sm p-h pos-rlt">
                <ul style="margin:0;padding:0">
                  <li data-ng-repeat="perspective in stationPerspectives">
                    <div class="p-h p-t m-b md-whiteframe-z1 pos-rlt md-background-hue-1 background">
                      <div class="pos-abt top-0 right-0 font-bold p">
                        #{{$index + 1}}
                      </div>
                      <md-input-container class="w-xxl m-b-0">
                        <label for="testInput">{{'titles.NAME' | translate}}</label>
                        <input type="text" ng-model="perspective.name">
                      </md-input-container>
                      <div class="clear">
                        <md-button aria-label="nothing" class="no-margin m-b-sm btn-sm pull-right no-padding" style="min-height: 28px; line-height:28px;" data-ng-click="allTags.splice($index, 1)">{{'titles.EDIT' | translate}}
                        </md-button>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>

            </div>
          </div>
        </div>
      </div>
	  </md-content>
  </md-sidenav>

  <script type="text/ng-template" id="carousel-template.html">
		<div id="perspective-editor-popover-id" class="perspective-editor-popover w-xl" click-outside="pe.clickOutside()"
			outside-if-not="delete-cell">
			<a ng-click="pe.clickOutside(); app.stopPropagation($event);" class="popover-close-button text-lg pull-right" tooltip="Fechar" tooltip-append-to-body="true" tooltip-placement="top">×</a>
			<div class="text-center p-xxs text-md m-b">
				destaques
			</div>
			<div class="pos-rlt">
				<div class="display-t-c p-r">
					<ul class="no-style">
						<li ng-repeat="cell in termPerspectiveView.featuredRow.cells" class="p-xxs sortable-elem">
							{{$index + 1}}ª
						</li>
					</ul>
				</div>
				<div class="display-t-c clearfix" style="min-width: 285px">
					<ul class="no-style w-full" ui-sortable ng-model="termPerspectiveView.featuredRow.cells">
						<li ng-repeat="cell in termPerspectiveView.featuredRow.cells" class="font-thin sortable-elem clearfix p-xxs">
							<div class=" ">
								<a angular-ripple id="delete-cell" class="border-radius-50 p-sm mdi-delete mdi pull-right" ng-click="$parent.removeFeaturedPost(cell.postView)">
								</a>
								<span class="clear m-r"
								tooltip="{{cell.postView.title}}" tooltip-placement="top" tooltip-append-to-body="true" tooltip-popup-delay="700">
									{{cell.postView.title | characters:75}}
								</span>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<div class="text-center p-xs w-full b-t m-t-sm">
				<a href="" class="text-md" ng-click="showAddFeaturedPost();pe.clickOutside();">
					<span class=" font-thin">adicionar</span>
					<i class="mdi mdi-plus-circle-outline v-middle"></i>
				</a>
			</div>
		</div>
	</script>

	<script type="text/ng-template" id="add_post.html">
		<md-dialog aria-label="Adicionar notícia" id="perspective-editor-dialog">
	  	<md-content>
				<div class="p">
					<form ng-submit="pe.submitSearch()">
						<div class="input-group">
							<input ng-model="pe.searchQuery" class="input-lg w-full form-control" placeholder="Busque por notícias" />
							<span class="input-group-btn">
			      <button class="btn btn-default btn-lg i-24" type="submit" style="padding: 6px 12px">
			      	<i class="mdi mdi-magnify"></i>
			      </button>
			     </span>
						</div>
					</form>
					<div class="p-xxs perspective-editor-search-results m-t-sm" >
						<ul class="no-style">
							<li ng-repeat="postView in pe.searchResults" class="clearfix p-xxs font-thin" ng-class="{'opacity-07 bg-light': !pe.cellAddValidation(postView)}">
			      <span ng-if="postView.featuredImageHash" style="height: 50px" class="bg-cover pull-left thumb m-r" ng-style="app.getBackgroundImage(postView, 'medium')">
			      </span>
			      <span class="pull-right" ng-if="pe.cellAddValidation(postView)"
			      tooltip="Adicionar" tooltip-placement="top" tooltip-append-to-body="true" tooltip-popup-delay="300">
									<a ng-click="pe.addCell(postView)" angular-ripple class="border-radius-50 text-lg p-sm mdi-plus mdi"></a>
								</span>
								<span class="pull-right" ng-if="!pe.cellAddValidation(postView)">
									<a ng-click="pe.removeCell(postView)" angular-ripple class="border-radius-50 text-lg p-sm mdi-close mdi animated bounceIn text-danger"></a>
								</span>
			      <span class="clear m-r-xxl">
			        <span>{{postView.title}}</span>
			        <small class="text-muted clear text-ellipsis" ng-bind-html="postView.snippet">
			        </small>
			      </span>
			    </li>
			    <li ng-if="pe.searchResults.length > 0">
			    	<div class="p-xs text-center">
			    		<button ng-click="pe.paginateSearch()" md-ink-ripple class="md-btn md-flat btn-fw">mais</button>
			    	</div>
			    </li>
						</ul>
					</div>
					<div class="pos-abt bottom-0 right-0 p-sm">
						<button ng-click="cancel()" md-ink-ripple class="md-btn md-flat btn-fw">Fechar</button>
					<div>
				</div>
		  </md-content>
		</md-dialog>
	</script>

	<script type="text/ng-template" id="config_category.html">
		<md-dialog aria-label="Adicionar notícia" id="perspective-editor-dialog">
	  	<md-content>
	  		<div class="p">
	  			<div class="text-lg text-center">Selectione as categorias desejadas</div>
					<div class="p-xxs perspective-editor-category-selector m-t-sm tree well">
						<ul class="normal-wrap perspective-editor-category-selector-list">
							<li ng-repeat="term in pe.terms">
								<span class="check-term" ng-click="pe.checkCategory(term)">
							 		<md-checkbox md-no-ink ng-model="term.checked" class="pull-left"></md-checkbox>
							 	</span>
							 	<span class="leaf box-shadow" tooltip="{{term.name}}" tooltip-placement="top" tooltip-append-to-body="true" tooltip-popup-delay="700">
							 		{{term.name}}
							 	</span>
						 	</li>
					 	</ul>
					</div>
					<div class="pos-abt bottom-0 right-0 p-sm">
						<button ng-click="cancel()" md-ink-ripple class="md-btn md-flat btn-fw">Fechar</button>
					</div>
				</div>
		  </md-content>
		</md-dialog>
	</script>