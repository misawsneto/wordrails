<div class="bg-light lter b-b wrapper-md">
  <h1 class="m-n font-thin h3">Taxonomias</h1>
</div>
<div class="wrapper-md" ng-controller="ScaffoldTaxonomiesCtrl">
  <div class="row">
    <div class="col-lg-10 col-lg-offset-1">
      <p>
        <a tooltip="criar nova taxonomia" ui-sref="app.scaffold.taxonomies_create" class="btn m-b-xs btn-lg btn-default btn-addon">
          <i class="fa fa-plus"></i>Nova Taxonomia
        </a> 
      </p>
      <div class="panel panel-default text-md">
        <div class="panel-heading">
          Todas as taxonomias
        </div>
        <div class="panel-body b-b b-light">
          Pesquisar: <input id="filter" type="text" class="form-control w-lg inline m-r m-l-sm"/>
        </div>
        <div>
          <table class="table m-b-none" ui-jq="footable" data-filter="#filter" data-page-size="100">
            <thead>
              <tr>
                <th data-toggle="true">
                  Nome
                </th>
                <th data-toggle="true">
                  Rede
                </th>
                <th data-toggle="true">
                  Estação
                </th>
                <th style="width: 160px;" class="text-center" data-toggle="true">
                  Visibilidade
                </th>
                <th data-hide="phone" class="text-center" style="width: 160px;" data-sort-ignore="true">
                  <i class="fa fa-cog"></i>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="taxonomy in taxonomies">
                <td><a href tooltip="alterar estrutura" class="h-u" ui-sref="app.scaffold.taxonomies_addterms({taxonomyId: taxonomy.id})" class="m-l-sm">
                  {{taxonomy.name}}</a></td>
                  <td>{{taxonomy.network.name}}</td>
                  <td>{{taxonomy.station.name}}</td>
                  <td class="text-center"> 
                    <span ng-if="taxonomy.type == 'N'" class="label bg-success">
                      Rede
                    </span>
                    <span ng-if="taxonomy.type == 'S'" class="label bg-primary">
                      Estação
                    </span>
                    <span ng-if="taxonomy.type != 'S' && taxonomy.type != 'N'" class="label bg-info">
                      Global
                    </span>
                  </td>
                  <td data-value="1" class="text-center">
                    <a href tooltip="alterar estrutura" ui-sref="app.scaffold.taxonomies_addterms({taxonomyId: taxonomy.id})"><i class="fa fa-fw fa-sitemap text-grey"></i></a>
                    <a href tooltip="renomear" ng-click="openModal('edit_taxonomy.html', null, taxonomy.id)" class="m-l-sm"><i class="fa fa-fw fa-pencil text-grey"></i></a>
                    <a href tooltip="remover" ng-click="openModal('delete_taxonomy.html', null, taxonomy.id)" class="m-l-sm"><i class="fa fa-fw fa-trash-o text-danger"></i></a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="text/ng-template" id="edit_taxonomy.html">
    <form ng-submit="editTaxonomy(newName)">
      <div class="modal-header">
        <h3 class="modal-title">Editar taxonomia</h3>
      </div>
      <div class="modal-body">
        <input ng-model="newName" class="form-control w-md" placeholder="Novo nome">
      </div>
      <div class="modal-footer">                  
        <a class="btn btn-default" ng-click="cancelModal()">Cancelar</a>
        <button type="submit" class="btn btn-primary">Alterar</button>
      </div>
    </form>
  </script>

  <script type="text/ng-template" id="delete_taxonomy.html">
    <form ng-submit="deleteTaxonomy()">
      <div class="modal-header">
        <h3 class="modal-title">Remover taxonomia</h3>
      </div>
      <div class="modal-body">
        Tem certeza que deseja remover a taxonomia?
      </div>
      <div class="modal-footer">                  
        <a class="btn btn-default" ng-click="cancelModal()">Cancelar</a>
        <button type="submit" class="btn btn-danger">Remover</button>
      </div>
    </form>
  </script>