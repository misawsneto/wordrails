<div class="wrapper-md" ng-controller="ScaffoldStationsCtrl">
  <p>
    <a ui-sref="app.scaffold.stations_create" class="btn m-b-xs btn-lg btn-default btn-addon">
      <i class="fa fa-plus"></i>Nova Estação
    </a> 
  </p>
  <div class="panel panel-default text-md">
    <div class="panel-heading">
      Todas as estações
    </div>
    <div class="panel-body b-b b-light">
      Pesquisar: <input id="filter" type="text" class="form-control w-lg inline m-r m-l-sm"/>
    </div>
    <div>
      <table class="table m-b-none" ui-jq="footable" data-filter="#filter" data-page-size="100">
        <thead>
          <tr>
            <th data-toggle="true">
              Nome
            </th>
            <th>
              Redes
            </th>
            <th class="text-center" data-sort-ignore="true">
              Visibilidade
            </th>
            <th class="text-center" data-sort-ignore="true">
              Escrita/Leitura
            </th>
            <th class="text-center" data-sort-ignore="true">
              <span tooltip="Estação da página principal">
                Principal
              </span>
            </th>
            <th data-hide="phone" style="width: 120px;" data-sort-ignore="true" class="text-center">
              <i class="fa fa-cog"></i>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="station in stations">
            <td><a href tooltip="renomear" class="h-u" ng-click="openModal('edit_station.html', null, station.id)" class="m-l-sm">
              {{station.name}}</a></td>
              <td><span ng-repeat="network in station.networks">{{network.name}} </span></td>              
              <td class="text-center">
                <div class="btn-group" >
                  <select class="form-control" ng-change="updateVisibility(station)"
                  ng-model="station.newVisibility"
                  ng-options="visibility.value as visibility.label for visibility in visibilities">
                </select>
              </div>
              <br>
            </td>
            <td class="text-center">
              <div class="btn-group" >
                <select class="form-control" ng-change="updateWritePermission(station)"
                ng-model="station.readWrite"
                ng-options="readWrite.value as readWrite.label for readWrite in readWrites">
              </select>
                  <!-- <label ng-change="updateWritePermission(station)" class="btn text-u-c btn-sm btn-default" ng-model="station.readWrite" btn-radio="'write'">Escrita</label>
                  
                  <label ng-change="updateWritePermission(station)" class="btn text-u-c btn-sm btn-default" ng-model="station.readWrite" btn-radio="'read'">Somente Leitura</label> -->
                </div>
              </td>
              <td class="text-center">
                <label class="i-checks">
                  <input type="checkbox" ng-change="setMainStation(station)" ng-model="station.main"><i></i>
                </label>
              </td>
              <td data-value="1" class="text-center">
                <a href tooltip="renomear" ng-click="openModal('edit_station.html', null, station.id)"><i class="fa fa-fw fa-pencil text-grey"></i></a>
                <a href tooltip="configurar" ui-sref="app.scaffold.stations_edit({stationId: station.id})"><i class="m-l-sm fa fa-fw fa-cog text-grey"></i></a>
                <a href tooltip="remover" ng-click="openModal('delete_station.html', null, station.id)" class="m-l-sm"><i class="fa fa-fw fa-trash-o text-danger"></i></a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script type="text/ng-template" id="edit_station.html">
    <form ng-submit="editStation(newName)">
      <div class="modal-header">
        <h3 class="modal-title">Editar estação</h3>
      </div>
      <div class="modal-body">
        <input ng-model="newName" class="form-control w-md" placeholder="Novo nome" required>
      </div>
      <div class="modal-footer">                  
        <a class="btn btn-default" ng-click="cancelModal()">Cancelar</a>
        <button type="submit" class="btn btn-primary">Alterar</button>
      </div>
    </form>
  </script>

  <script type="text/ng-template" id="delete_station.html">
    <form ng-submit="deleteStation()">
      <div class="modal-header">
        <h3 class="modal-title">Remover estação</h3>
      </div>
      <div class="modal-body">
        Tem certeza que deseja remover a estação?
      </div>
      <div class="modal-footer">                  
        <a class="btn btn-default" ng-click="cancelModal()">Cancelar</a>
        <button type="submit" class="btn btn-danger">Remover</button>
      </div>
    </form>
  </script>