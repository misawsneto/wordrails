<div ng-controller="PostEditorCtrl" class="bg-white animated fadeIn">
  <!-- header -->
  <div class="wrapper bg-light lter b-b top-toolbar">
    <button ng-click="toggleTermSelector()" id="term-selector-toggler" class="btn btn-default">
      <i class="icon icon-list"></i>
    </button>
    <div id="post-editor-top-buttons" class="btn-group pull-right">
      <!-- <a href class="m-b-xs btn btn-sm btn-default w-xxs w-auto-xs" tooltip="Arquivar"><i class="fa fa-save"></i></a> -->
      <a ui-sref="app.stations" ui-sref-opts="{ reload: true }" class="m-b-xs btn btn-sm btn-default w-xxs w-auto-xs" tooltip="Descartar" tooltip-placement="bottom">
        <i class="glyphicon glyphicon-trash"></i>
      </a>
      <a class="m-b-xs btn btn-sm btn-default w-xxs w-auto-xs" tooltip="Salvar como racunho" tooltip-placement="bottom"
      ng-click="submitDraft()">
        <i class="fa fa-save"></i>
      </a>
      <a href class="m-b-xs btn btn-sm m-r btn-default w-xxs w-auto-xs" ng-click="submit()" tooltip="Publicar" tooltip-placement="bottom"><i class="fa fa-send"></i></a>
      <!-- <span class="term-tags">
        <a tooltip="remover" ng-click="removeTerm(selectedTerm)" ng-repeat="selectedTerm in p.termList" class="m-l-sm m-b-xs h-u">{{selectedTerm.name}}</a>
      </span> -->
    </div>
    <div id="custom-toolbar">
    </div>
  </div>
  <!-- / header -->
  <div class="hbox hbox-auto-xs hbox-auto-sm news-editor">
    <div class="col">
      <div class="wrapper-md">

        <div class="row">
          <div class="col-sm-10 col-sm-offset-1">

            <div id="post-editor" class="blog-post m-l m-r"> 
              <!-- Post -->
              <div class="panel no-shadow">
                <input ng-show="app.network.currentStation.topper" type="text" ng-model="topper" placeholder="Chapéu" class="h4 text-black w-full b-none">
                <span ng-if="app.network.currentStation.postsTitleSize > 0" class="text-black title-counter">{{app.network.currentStation.postsTitleSize - title.length}}</span>
                <input type="text" ng-model="title" placeholder="Título" class="h1 m-b-lg text-black text-center w-full b-none">
                <div>
                  <!-- image -->
                  <div class="row" ng-show="!uploadedImage">
                    <div class="col-sm-8 col-sm-offset-2">
                      <div class="text-center">
                        <span id="image-button" class="m-t-xs btn btn-rounded btn-lg btn-icon btn-success fileinput-button" style="">
                          <i class="fa fa-image"></i><input id="image-upload" type="file" nv-file-select="" uploader="uploader" name="contents" accept="image/*"/>
                        </span>
                        <div class="padder-sm ">
                          <a ng-if="uploader.progress > 0 && !uploadedImage" class="m-l-sm pull-right pointer m-r-xs" ng-click="clearImage()"><i class="fa fa-times"></i></a>
                          <p class="m-r-sm m-l-xs text-ellipsis">{{p.file.name}}</p>
                          <div ng-if="uploader.progress > 0 && !uploadedImage">
                            <div id="progress" class="progress progress-striped progress-xs m-b-xs">
                              <div class="progress-bar progress-bar-success" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- image button -->
                  <div id="image-holder" ng-show="uploadedImage.link">
                    <img ng-src="{{uploadedImage.link}}" class="img-full animated fadeIn">
                    <button ng-click="clearImage()" class="btn btn-md btn-rounded btn-icon btn-danger">
                      <i class="glyphicon glyphicon-trash"></i>
                    </button>
                  </div>
                  <!-- <div id="image-holder" ng-show="p.file.largeId">
                    <img ng-src="{{p.file.largeId | imageLink}}" class="img-full animated fadeIn">
                    <button ng-click="clearImage()" class="btn btn-md btn-rounded btn-icon btn-danger">
                      <i class="glyphicon glyphicon-trash"></i>
                    </button>
                  </div> -->

                </div>
                <div class="wrapper-lg text-lg pull-in">
                  <div class="text-black pt-serif">
                    <textarea ng-model="content" redactor style="opacity: 0"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="text-center">
          <a class="btn m-l btn-default text-u-c btn-addon" ui-sref="app.stations" ui-sref-opts="{ reload: true }">
            <i class="glyphicon glyphicon-trash"></i>
            Descartar
          </a>
          <a class="btn m-l btn-default text-u-c btn-addon" ng-click="submitDraft()">
            <i class="fa fa-save"></i>
            Rascunho
          </a>
          <button ng-if="!published" class="btn m-l m-r btn-dark btn-addon text-u-c" ng-click="submit()">
            <i class="fa fa-send"></i>Publicar
          </button>
          <button ng-if="editing && published" class="btn m-l m-r btn-dark btn-addon text-u-c" ng-click="submit()">
            <i class="fa fa-send"></i>Atualizar
          </button>
        </div> -->

      </div>
    </div>
    <div id="new-post-term-selector" class="col w-xl bg-white-only b-l no-border-xs" ng-show="showTermSelector">
      <div class="wrapper-md">
        <div class="input-group w-full m-b-xs" ng-click="dateTouched = true">
          <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="date" is-open="opened" datepicker-options="dateOptions" ng-required="true" close-text="Fechar" current-text="Hoje" clear-text="Limpar"/>
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="open($event); dateTouched = true;"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
        </div>
        <div class="text-right" ng-show="!showTimepicker">
          <a ng-click="showTimepicker = !showTimepicker"><i class="fa fa-fw m-r-xs fa-clock-o"></i><small class="">horário da publicação</small></a>
        </div>
        <div ng-show="showTimepicker" class="timepicker-container">
          <timepicker ng-model="mytime" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></timepicker>
        </div>
      </div>
      <div ng-repeat="taxonomy in taxonomies">
        <div data-ng-include=" 'tpl/app/app_post_editor_taxonomies.html' "></div>
      </div>
      <div id="tags-list" class="b-t" ng-if="tagTerms != null">
        <div class="m-t m-b-md">
          <div class="m-b-none">
            <div ui-module="select2" class="m-l-md m-r-md">
              <input id="post-tags" type="hidden" data-placeholder="Palavras-chave" ui-select2="select2Options" ng-model="selectedTags" class="form-control w-full">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>